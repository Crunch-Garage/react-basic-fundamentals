{"ast":null,"code":"import _slicedToArray from \"/project/home/mutuamkennedy/workspace/Dynamic form/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/project/home/mutuamkennedy/workspace/Dynamic form/src/App.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport \"./styles.css\";\n\n// Demo user data for this example to work\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar usersData = [{\n  username: \"breakingbird\",\n  email: \"break@bad.com\",\n  phone: \"+254712345678\",\n  password: \"bbad\" // Note: Passwords from a server are never stored as strings, they are hashed for security reasons.\n}, {\n  username: \"gusfring\",\n  email: \"lospollos@hermanos.com\",\n  phone: \"+254734567890\",\n  password: \"chickenman\" // Note: Passwords from a server are never stored as strings, they are hashed for security reasons.\n}];\n\nexport default function App() {\n  _s();\n  var _React$useState = React.useState(function () {\n      return window.localStorage.getItem(\"loginMessage\") || {};\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    loginMessage = _React$useState2[0],\n    setLoginMessage = _React$useState2[1];\n  React.useEffect(function () {\n    window.localStorage.setItem(\"loginMessage\", loginMessage);\n  }, [loginMessage]);\n  var validateEmail = function validateEmail(email) {\n    return email.toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n  };\n\n  // this can get really tricky to validate due to multiple ways the number can be submitted\n  // we can enforce a formart on the client form but that can be bypassed. probably best to use a 3rd party provider\n  // but since this is a demo let go ahead\n  var validatePhone = function validatePhone(phone) {\n    return phone.match(/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\\s\\./0-9]*$/g);\n  };\n  var loginMethod = function loginMethod(input) {\n    return validateEmail(input) !== null ? \"email\" : validatePhone(input) !== null ? \"phone\" : \"username\";\n  };\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    // Get the user login info\n    var loginWithInput = String(e.target.elements.loginWithInput.value);\n    var passwordInput = String(e.target.elements.passwordInput.value);\n\n    // get login method: email? phone? username?\n    var loginWith = loginMethod(loginWithInput);\n\n    // Filter the users\n    var getUser = function getUser(key) {\n      var result = usersData.filter(function (user) {\n        if (key === \"email\") {\n          return user.email === loginWithInput;\n        } else if (key === \"phone\") {\n          return user.phone === loginWithInput;\n        } else {\n          return user.username === loginWithInput;\n        }\n      });\n      return result;\n    };\n    var user;\n    loginWith === \"email\" ? user = getUser(\"email\") : loginWith === \"phone\" ? user = getUser(\"phone\") : user = getUser(\"username\");\n    // validate the password\n    // this validation is normally done from the backend level.\n    if (user.length > 0) {\n      user[0].password === passwordInput ? setLoginMessage({\n        type: \"sucess\",\n        message: \"Login successfull, redirecting shortly!\"\n      }) :\n      // Do some stuff:\n      // Store user token, redirect user to a page etc.\n      setLoginMessage({\n        type: \"error\",\n        message: \"Incorrect login credentials. Try again!\"\n      });\n    } else setLoginMessage({\n      type: \"error\",\n      message: \"No user found! Try creating an account!\"\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"LoginForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Glad to have you back!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" Please enter your login details to continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"loginWithInput\",\n          children: \"Username, email or password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"loginWithInput\",\n          type: \"text\",\n          placeholder: \"Username, phone number or email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htfor: \"passwordInput\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"passwordInput\",\n          type: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), loginMessage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: loginMessage.type === \"error\" ? \"error\" : \"success\",\n        children: loginMessage.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"AYunWfIRCdxRxz5gzQLXW6xdQK8=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","usersData","username","email","phone","password","App","useState","window","localStorage","getItem","loginMessage","setLoginMessage","useEffect","setItem","validateEmail","toLowerCase","match","validatePhone","loginMethod","input","handleSubmit","e","preventDefault","loginWithInput","String","target","elements","value","passwordInput","loginWith","getUser","key","result","filter","user","length","type","message"],"sources":["/project/home/mutuamkennedy/workspace/Dynamic form/src/App.js"],"sourcesContent":["import React from \"react\";\nimport \"./styles.css\";\n\n// Demo user data for this example to work\nconst usersData = [\n  {\n    username: \"breakingbird\",\n    email: \"break@bad.com\",\n    phone: \"+254712345678\",\n    password: \"bbad\" // Note: Passwords from a server are never stored as strings, they are hashed for security reasons.\n  },\n  {\n    username: \"gusfring\",\n    email: \"lospollos@hermanos.com\",\n    phone: \"+254734567890\",\n    password: \"chickenman\" // Note: Passwords from a server are never stored as strings, they are hashed for security reasons.\n  }\n];\n\nexport default function App() {\n  const [loginMessage, setLoginMessage] = React.useState(() => {\n    return window.localStorage.getItem(\"loginMessage\") || {};\n  });\n\n  React.useEffect(() => {\n    window.localStorage.setItem(\"loginMessage\", loginMessage);\n  }, [loginMessage]);\n\n  const validateEmail = (email) => {\n    return email\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n  };\n\n  // this can get really tricky to validate due to multiple ways the number can be submitted\n  // we can enforce a formart on the client form but that can be bypassed. probably best to use a 3rd party provider\n  // but since this is a demo let go ahead\n  const validatePhone = (phone) => {\n    return phone.match(/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\\s\\./0-9]*$/g);\n  };\n\n  const loginMethod = (input) => {\n    return validateEmail(input) !== null\n      ? \"email\"\n      : validatePhone(input) !== null\n      ? \"phone\"\n      : \"username\";\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // Get the user login info\n    const loginWithInput = String(e.target.elements.loginWithInput.value);\n    const passwordInput = String(e.target.elements.passwordInput.value);\n\n    // get login method: email? phone? username?\n    const loginWith = loginMethod(loginWithInput);\n\n    // Filter the users\n    const getUser = (key) => {\n      const result = usersData.filter((user) => {\n        if (key === \"email\") {\n          return user.email === loginWithInput;\n        } else if (key === \"phone\") {\n          return user.phone === loginWithInput;\n        } else {\n          return user.username === loginWithInput;\n        }\n      });\n      return result;\n    };\n\n    let user;\n    loginWith === \"email\"\n      ? (user = getUser(\"email\"))\n      : loginWith === \"phone\"\n      ? (user = getUser(\"phone\"))\n      : (user = getUser(\"username\"));\n    // validate the password\n    // this validation is normally done from the backend level.\n    if (user.length > 0) {\n      user[0].password === passwordInput\n        ? setLoginMessage({\n            type: \"sucess\",\n            message: \"Login successfull, redirecting shortly!\"\n          })\n        : // Do some stuff:\n          // Store user token, redirect user to a page etc.\n          setLoginMessage({\n            type: \"error\",\n            message: \"Incorrect login credentials. Try again!\"\n          });\n    } else\n      setLoginMessage({\n        type: \"error\",\n        message: \"No user found! Try creating an account!\"\n      });\n  };\n  return (\n    <div className=\"App\">\n      <div className=\"LoginForm\">\n        <h3>Glad to have you back!</h3>\n        <p> Please enter your login details to continue</p>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor=\"loginWithInput\">Username, email or password</label>\n          <input\n            id=\"loginWithInput\"\n            type=\"text\"\n            placeholder=\"Username, phone number or email\"\n            required\n          />\n          <label htfor=\"passwordInput\">Password</label>\n          <input id=\"passwordInput\" type=\"password\" required />\n          <button type=\"submit\">Submit</button>\n        </form>\n        {loginMessage ? (\n          <div className={loginMessage.type === \"error\" ? \"error\" : \"success\"}>\n            {loginMessage.message}\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}